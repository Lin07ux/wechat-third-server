<layout name="Public/layout" />

<div id="user" v-cloak>
    <p class="bg-info">欢迎您，{$Think.session.user.name}</p>

    <button class="btn btn-secondary" @click.prevent="form.show = true">修改密码</button>

    <div class="fixed-form" v-show="form.show" @click.self="form.show = false">
        <form action="{:U('User/resetPwd')}" @submit.prevent="submit">
            <h4 class="text-center">修改密码</h4>

            <div class="form-group">
                <label for="oldPwd">当前密码</label>
                <input type="password" class="form-control" id="oldPwd" v-model="form.oldPwd" required>
            </div>
            <div class="form-group">
                <label for="newPwd">新密码</label>
                <input type="password" class="form-control" id="newPwd" v-model="form.newPwd" required>
            </div>
            <div class="form-group">
                <label for="rePwd">确认密码</label>
                <input type="password" class="form-control" id="rePwd" v-model="form.rePwd" required>
            </div>

            <div class="form-group text-center">
                <button type="submit" class="btn btn-primary">提交</button>
                <button type="reset" class="btn btn-danger" @click="form.show = false">取消</button>
            </div>
        </form>
    </div>
</div>

<assign name="load_script[]" value="/Assets/js/admin/user/index.js" />